#!/usr/bin/env bash
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --time=172:00:00
#SBATCH --mem=10GB
#SBATCH --partition=zki
#SBATCH --gres=local:20
#SBATCH --output=slurm.log
#SBATCH --job-name=benchmark-seq2squiggle

JOBS=100

# Ensure log dir for SLURM jobs generated by snakemake exists
mkdir -p results/logs/slurm

conda run --prefix ./env --live-stream \
  snakemake --profile ./workflow/slurm --use-conda --jobs "$JOBS" --retries 2 --local-cores 4
